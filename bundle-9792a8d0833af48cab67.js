(()=>{"use strict";var e={193:(e,t,i)=>{i.r(t)},33:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateGame=void 0;t.generateGame=({field:e,gridContainer:t,tileContainer:o,matrix:n})=>{i(n,t),e.map((e=>r(o,String(e))))};const i=(e,t)=>e.map((e=>((e,t)=>{const i=document.createElement("div");return i.className="grid__row",t.appendChild(i),e.map((()=>(e=>{const t=document.createElement("div");return t.className="grid__cell",e.appendChild(t)})(i)))})(e,t))),r=(e,t)=>{const i=document.createElement("div");i.className="tile",i.dataset.matrixId=t,i.innerText=t,"0"===t&&(i.style.opacity="0"),e.appendChild(i)}},949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMatrix=void 0,t.getMatrix=(e,t)=>{const i=[];return e.map((()=>i.push(e.splice(0,t)))),i}},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.matrixStorage=t.sizeStorage=void 0,t.sizeStorage=localStorage.getItem("size"),t.matrixStorage=localStorage.getItem("matrix")},969:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setNodeStyles=t.setPositionItems=void 0,t.setPositionItems=(e,i)=>{for(let r=0;r<e.length;r++)for(let o=0;o<e.length;o++){const n=e[r][o],s=i.find((e=>e.dataset.matrixId===String(n)));if(void 0===s)return;(0,t.setNodeStyles)(s,o+1,r+1)}},t.setNodeStyles=(e,t,i)=>{const r=`tile-position-${t}-${i}`;e.className=`tile ${r}`}},527:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fieldSize=t.matrix=t.field=t.initialField=t.size=void 0;const r=i(876),o=i(949),n=r.sizeStorage?Number(r.sizeStorage):8,s=Math.pow(n,2),l=[...Array(s-1).keys()].map((e=>++e)),a=[...l].sort((()=>Math.random()-.5)).concat(0),c={size:n,fieldSize:s,initialField:l,field:a,matrix:r.matrixStorage?JSON.parse(r.matrixStorage):(0,o.getMatrix)([...a],n)};t.size=c.size,t.initialField=c.initialField,t.field=c.field,t.matrix=c.matrix,t.fieldSize=c.fieldSize}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{i(193);const e=i(527),t=i(969),r=i(33),o=document.querySelector(".tiles"),n=document.querySelector(".grid");(0,r.generateGame)({field:e.field,gridContainer:n,tileContainer:o,matrix:e.matrix});const s=Array.from(o.querySelectorAll(".tile"));function l(e,t){for(let i=0;i<t.length;i++)for(let r=0;r<t.length;r++)if(t[i][r]===e)return{x:r,y:i}}(0,t.setPositionItems)(e.matrix,s),o.addEventListener("click",(i=>{const r=i.target.closest(".tile");if(!r)return;const o=l(Number(r.dataset.matrixId),e.matrix),n=l(0,e.matrix),a=function(e,t){const i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1!==i&&1!==r||e.x!==t.x&&e.y!==t.y?(0===i&&0!==r||0!==i&&0===r)&&"long-swap":"short-swap"}(o,n);a&&n&&o&&("short-swap"===a&&(function(e,t,i){const r=i[e.y][e.x];i[e.y][e.x]=i[t.y][t.x],i[t.y][t.x]=r}(n,o,e.matrix),(0,t.setPositionItems)(e.matrix,s)),"long-swap"===a&&(function(t,i,r){r[t.y][t.x];const o=(i,r,o)=>{const n=i.slice(t.x),s=i.length-1;if(0===r&&o===s)return function(e,t,i){return[].concat(t,e.slice(0,i))}(i.slice(0,e.size),n,s);if(0===r&&o!==s){const t=i.slice(0,o);t.unshift(0);const r=i.slice(o+1,e.size);return[].concat(t,r)}{const t=i.slice(0,r),o=i.slice(r,e.size).filter((e=>0!==e));return o.unshift(0),[].concat(t,o)}},n=(i,r,o)=>{i.slice(t.x);const n=i.length-1;if(r===n&&0===o){console.log(1);const e=i.filter((e=>0!==e));return e.push(0),e}if(0!==o&&r===n){console.log(2);const t=i.slice(0,o),r=i.slice(o+1,e.size);return r.push(0),[].concat(t,r)}if(0!==o&&r!==n){console.log(3);const t=i.slice(0,r+1).filter((e=>0!==e)),o=i.slice(r+1,e.size);return t.push(0),console.log(t,o),[].concat(t,o)}{console.log(4);const t=i.slice(1,r+1),o=i.slice(r+1,e.size);return t.push(0),[].concat(t,o)}};for(let e=0;e<r.length;e++)if(e===i.y){const s=i.x,l=t.x;if(l>s)return r[e]=o(r[e],s,l);if(l<s)return r[e]=n(r[e],s,l)}}(n,o,e.matrix),(0,t.setPositionItems)(e.matrix,s)))}))})()})();