(()=>{"use strict";var e={193:(e,t,i)=>{i.r(t)},33:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateGame=void 0;t.generateGame=({field:e,gridContainer:t,tileContainer:o,matrix:n})=>{i(n,t),e.map((e=>r(o,String(e))))};const i=(e,t)=>e.map((e=>((e,t)=>{const i=document.createElement("div");return i.className="grid__row",t.appendChild(i),e.map((()=>(e=>{const t=document.createElement("div");return t.className="grid__cell",e.appendChild(t)})(i)))})(e,t))),r=(e,t)=>{const i=document.createElement("div");i.className="tile",i.dataset.matrixId=t,i.innerText=t,"0"===t&&(i.style.opacity="0"),e.appendChild(i)}},949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMatrix=void 0,t.getMatrix=(e,t)=>{const i=[];return e.map((()=>i.push(e.splice(0,t)))),i}},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.matrixStorage=t.sizeStorage=void 0,t.sizeStorage=localStorage.getItem("size"),t.matrixStorage=localStorage.getItem("matrix")},969:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setNodeStyles=t.setPositionItems=void 0,t.setPositionItems=(e,i)=>{for(let r=0;r<e.length;r++)for(let o=0;o<e.length;o++){const n=e[r][o],s=i.find((e=>e.dataset.matrixId===String(n)));if(void 0===s)return;(0,t.setNodeStyles)(s,o+1,r+1)}},t.setNodeStyles=(e,t,i)=>{const r=`tile-position-${t}-${i}`;e.className=`tile ${r}`}},527:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fieldSize=t.matrix=t.field=t.initialField=t.size=void 0;const r=i(876),o=i(949),n=r.sizeStorage?Number(r.sizeStorage):6,s=Math.pow(n,2),a=[...Array(s-1).keys()].map((e=>++e)),l=[...a].sort((()=>Math.random()-.5)).concat(0),c={size:n,fieldSize:s,initialField:a,field:l,matrix:r.matrixStorage?JSON.parse(r.matrixStorage):(0,o.getMatrix)([...l],n)};t.size=c.size,t.initialField=c.initialField,t.field=c.field,t.matrix=c.matrix,t.fieldSize=c.fieldSize}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{i(193);const e=i(527),t=i(969),r=i(33),o=document.querySelector(".tiles"),n=document.querySelector(".grid");(0,r.generateGame)({field:e.field,gridContainer:n,tileContainer:o,matrix:e.matrix});const s=Array.from(o.querySelectorAll(".tile"));function a(e,t){for(let i=0;i<t.length;i++)for(let r=0;r<t.length;r++)if(t[i][r]===e)return{x:r,y:i}}(0,t.setPositionItems)(e.matrix,s),o.addEventListener("click",(i=>{const r=i.target.closest(".tile");if(!r)return;const o=a(Number(r.dataset.matrixId),e.matrix),n=a(0,e.matrix),l=function(e,t){const i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1!==i&&1!==r||e.x!==t.x&&e.y!==t.y?(0===i&&0!==r||0!==i&&0===r)&&"long-swap":"short-swap"}(o,n);l&&n&&o&&("short-swap"===l&&(function(e,t,i){const r=i[e.y][e.x];i[e.y][e.x]=i[t.y][t.x],i[t.y][t.x]=r}(n,o,e.matrix),(0,t.setPositionItems)(e.matrix,s)),"long-swap"===l&&(function(t,i,r){const o=(i,r,o)=>{const n=i.slice(t.x),s=i.length-1;if(0===r&&o===s)return function(e,t,i){return[].concat(t,e.slice(0,i))}(i.slice(0,e.size),n,s);if(0===r&&o!==s){const t=i.slice(0,o);t.unshift(0);const r=i.slice(o+1,e.size);return[].concat(t,r)}{const t=i.slice(0,r),o=i.slice(r,e.size).filter((e=>0!==e));return o.unshift(0),[].concat(t,o)}},n=(t,i,r)=>{const o=t.length-1;if(i===o&&0===r){const e=t.filter((e=>0!==e));return e.push(0),e}if(0!==r&&i===o){const i=t.slice(0,r),o=t.slice(r+1,e.size);return o.push(0),[].concat(i,o)}if(0!==r&&i!==o){const r=t.slice(0,i+1).filter((e=>0!==e)),o=t.slice(i+1,e.size);return r.push(0),[].concat(r,o)}{const r=t.slice(1,i+1),o=t.slice(i+1,e.size);return r.push(0),[].concat(r,o)}};for(let e=0;e<r.length;e++)for(let s=0;s<r.length;s++){const l=i.x,c=t.x;if(e===i.y){if(c>l)return r[e]=o(r[e],l,c);if(c<l)return r[e]=n(r[e],l,c);if(s===c){const e=a(0,r);let t=e.y;if(e.y>i.y)for(;0!==t;){const e=a(0,r),o=r[t][s],n=r[t-1][s];e.y>i.y&&(r[t-1][s]=o,r[t][s]=n),--t}if(e.y<=i.y){let e=a(0,r).y;for(console.log(e);e!==i.y;){const t=r[e][s],i=r[e+1][s];r[e+1][s]=t,r[e][s]=i,++e}}console.log(r)}}}}(n,o,e.matrix),(0,t.setPositionItems)(e.matrix,s)))}))})()})();